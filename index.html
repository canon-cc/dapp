<!DOCTYPE HTML>
<!--
	Prologue by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<title>星云dapp搜索引擎</title>
		<meta charset="utf-8" />
		<link rel="stylesheet" href="css/style.css">
		<script src="js/jquery-1.9.1.js" type="text/javascript" charset="utf-8"></script>
	  
	  
	  <script type="text/javascript" src="./dist/nebulas.js"></script>
	  
	  <script type="text/javascript" src="./dist/nebPay.js"></script>
	  
	  
	  <link rel="stylesheet" type="text/css" href="./css/mobie.css" media="only screen and (max-device-width:700px)">	
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="assets/css/main.css" />
		<script type="text/javascript">
			var dappContactAddress = "n1f9BdA469xwYraYTV3nyqrBdPpZdiWjYeZ";
			var nebulas = require("nebulas"), Account = Account, neb = new nebulas.Neb();
			neb.setRequest(new nebulas.HttpRequest("https://mainnet.nebulas.io"));
			var NebPay = require("nebpay");     //https://github.com/nebulasio/nebPay
			var nebPay = new NebPay();
			var serialNumber;
			
			  var from = dappContactAddress
				var value = "0";
				var nonce = "0"
				var gas_price = "1000000"
				var gas_limit = "2000000"
				var callFunction = "getlength";
				var callArgs = "[]";
				var aaa;
				var number=0;
				console.log(callArgs);
				var contract = {
					"function": callFunction,
					"args": callArgs
				}
			function get(){
			 
				console.log("111");
		   
				var callFunction = "getJoker";
				
				for(var i=0;i<30;i++){
					console.log("222");
					var callArgs = "[\""+i+"\"]";
					var contract = {
					"function": callFunction,
					"args": callArgs
					}
					neb.api.call(from, dappContactAddress, value, nonce, gas_price, gas_limit, contract).then(function (resp) {
					var result = resp.result;
					
			 		 result = JSON.parse(result);
					var contentstr = result.content;
					if(contentstr.length>0 ){
		
				 var a= document.getElementById("list");
				var b = document.createElement("blockquote");
				 b.innerHTML=contentstr;
				 a.appendChild(b);
				 holmes({
				input: '.search input',
				find: '.results blockquote',
				placeholder: '',
				class: {
				  visible: 'visible',
				  hidden: 'hidden'
				}
				  });
				  
					
				
					
				  }
				}).catch(function (err) {
					console.log("error :" + err.message);
		
				})
		
				}
		
		
		
			}
		  
			window.onload =get;
			
		
	
    
		 function sub(){
			
				  var nn=$("#intro").val();
				  var mm=$("#web").val();
				  var to = dappContactAddress;
				  var callFunction = "save";
				  var value = "0";
				  var callArgs = "[\"" +nn+"@"+mm+ "\"]";
				  serialNumber = nebPay.call(to, value, callFunction, callArgs, {    //使用nebpay的call接口去调用合约,
					listener: function (resp) {
						console.log("thecallback is " + resp)
						if(typeof resp == "string"){
						console.log("reject! cancel");
						 alert("已取消上传")
				   
						}else{
						  var a= document.getElementById("list");
						   var b = document.createElement("blockquote");
						  b.innerHTML=v;
						  a.appendChild(b);
						  alert("上传成功");
					
					
				}
					}
				});
	
	
				
				  
				
		 }
		
	
		
		
		
			
			
		</script>
	</head>
	<body class="is-preload">

		<!-- Header -->
			<div id="header">

				<div class="top">

					<!-- Logo -->
						<div id="logo">
							
							<h1 id="title">星云</h1>
							<p>dapp搜索</p>
						</div>

					<!-- Nav -->
						<nav id="nav">
							<ul>
								<li><a href="#top" id="top-link"><span class="icon fa-home">介绍</span></a></li>
								<li><a href="#portfolio" id="portfolio-link"><span class="icon fa-th">搜索</span></a></li>
								
								<li><a href="#contact" id="contact-link"><span class="icon fa-envelope">上传</span></a></li>
							</ul>
						</nav>

				</div>

				<div class="bottom">

					<!-- Social Icons -->
						<ul class="icons">
							<li><a href="#" class="icon fa-twitter"><span class="label">Twitter</span></a></li>
							<li><a href="#" class="icon fa-facebook"><span class="label">Facebook</span></a></li>
							<li><a href="#" class="icon fa-github"><span class="label">Github</span></a></li>
							<li><a href="#" class="icon fa-dribbble"><span class="label">Dribbble</span></a></li>
							<li><a href="#" class="icon fa-envelope"><span class="label">Email</span></a></li>
						</ul>

				</div>

			</div>

		<!-- Main -->
			<div id="main">

				<!-- Intro -->
					<section id="top" class="one dark cover">
						<div class="container">

							<header>
								<h2 class="alt">星云<strong>dapp搜索</strong><br />
									Nebulas Dapp Search</h2>
								<p>星云链上线至今已有6000+dapp在主网运行<br />
									面对如此众多的dapp是不是无从下手，欢迎输入关键字寻找你所需要</p>
							</header>

							<footer>
								<a href="#portfolio" class="button scrolly">search now</a>
							</footer>

						</div>
					</section>

				<!-- Portfolio -->
					<section id="portfolio" class="two">
						<div class="container">

							<header>
								<h1>
								  <a href="#">nebulas</a>
								  <img src="images/holmes_logo-hover.svg" alt="Holmes Logo">
								</h1>
								<p>dapp搜索</p>
							  </header>
							  
							 
							  <div class="search">
								<input type="search" placeholder="search here" required>
								
							  </div>
							  <div class="results" id="list">
							   
								  <blockquote>
									星云链彼特熊@http://bbbear.io/bbbear-nebulas-release.apk
								  </blockquote>
								  <blockquote>
									隐秘世界OL@http://www.h5indiegame.com:9955/run.php?id=38
									</blockquote>
								 <blockquote>
									头号玩家——资本游戏@https://cgplayerone.com/
								 </blockquote>   
								 <blockquote>
									Monsterblock宠物精灵@https://bobio2018.github.io/MonsterBlock/index.html
									</blockquote>
									<blockquote>
								星云水浒@https://nas.cryptohero.pro/#/
										</blockquote>
										<blockquote>
									星云链智能合约在线调试编辑器@https://xingyun.work/playground/
									</blockquote>
									<blockquote>
									IPFAS共享网盘@https://hansonhh.github.io/ipfas/#/
									</blockquote>
									<blockquote>
										NAS Smart Contract Explorer@http://explorer.nebulas.cool/
										</blockquote>
										<blockquote>
									星云wiki@https://zoowii.coding.me/nebwiki/#page/nebwiki
										</blockquote>
							
							   
							  </div>

						</div>
					</section>

			

				<!-- Contact -->
					<section id="contact" class="four">
						<div class="container">

							<header>
								<h2>上传你的DAPP</h2>
							</header>

							<p>在这里你可以手动上传你的dapp，其将会被收录进搜索目录，可能会带来不少流量哦</p>

							<form method="post" action="#">
								<div class="row">
									<div class="col-6 col-12-mobile"><input type="text" name="name" placeholder="简单介绍" id="intro"/></div>
									<div class="col-6 col-12-mobile"><input type="text" name="email" placeholder="网址" id="web" /></div>
									
									<div class="col-12">
										<input type="button" value="上传" id="btn6" onclick="sub()" />
									</div>
								</div>
							</form>

						</div>
					</section>

			</div>

		<!-- Footer -->
			<div id="footer">

				<!-- Copyright -->
					<ul class="copyright">
						<li>&copy; Untitled. All rights reserved.</li><li>Design: <a href="http://html5up.net">HTML5 UP</a></li>
					</ul>

			</div>

		<!-- Scripts -->
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/jquery.scrolly.min.js"></script>
			<script src="assets/js/jquery.scrollex.min.js"></script>
			<script src="assets/js/browser.min.js"></script>
			<script src="assets/js/breakpoints.min.js"></script>
			<script src="assets/js/util.js"></script>
			<script src="assets/js/main.js"></script>
			<script src="js/holmes.js"></script>
			<script src="js/microlight.js"></script>
			<script>
				// holmes setup
			   
			  
				// show all of the options
				document.getElementById('more').addEventListener('click',function(e){
				  e.preventDefault();
				  document.getElementById('full-doc').classList.toggle('hidden');
				});
			  
				// toggle for showing hidden elements
				document.querySelector('.toggle').addEventListener('click', function(e) {
				  e.target.classList.toggle('clicked');
				  document.querySelector('.results').classList.toggle('classes');
				});
			</script>

	</body>
</html>